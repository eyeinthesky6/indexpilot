[mypy]
# PRIMARY TOOL: Static type checking
# No conflicts with ruff (linting), pylint (AST), pyright (different type algorithm)
python_version = 3.13
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = False
disallow_incomplete_defs = False
check_untyped_defs = True
disallow_untyped_decorators = False
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
show_error_codes = True
# Ban Any usage codebase-wide (type safety goal)
# Per-module exceptions below for legitimate third-party library limitations
disallow_any_generics = True
disallow_any_unimported = True
disallow_any_expr = True
disallow_any_decorated = True
disallow_any_explicit = True

[mypy-psycopg2.*]
# Type stubs available via types-psycopg2 package

[mypy-psutil.*]
# Type stubs available via types-psutil package

# Third-party adapter files - use dynamic typing for host implementations
[mypy-src.adapters]
# Adapters use dynamic host implementations (Datadog, Sentry, etc.)
# which cannot be statically typed
disallow_any_expr = False
disallow_any_explicit = False
disallow_any_decorated = False

# Graceful shutdown uses signal handlers with Any types from stdlib
[mypy-src.graceful_shutdown]
disallow_any_expr = False
disallow_any_decorated = False

# Database module uses psycopg2 types which contain Any
[mypy-src.db]
disallow_any_expr = False
disallow_any_decorated = False

# Config loader uses yaml.safe_load which returns Any
[mypy-src.config_loader]
disallow_any_expr = False

# Validation module uses database connections with Any types
[mypy-src.validation]
disallow_any_expr = False

# Database type detector uses database connections with Any types
[mypy-src.database.type_detector]
disallow_any_expr = False

# Query optimizer uses database connections with Any types
[mypy-src.query_optimizer]
disallow_any_expr = False

# Scaled reporting uses database connections with Any types
[mypy-src.scaled_reporting]
disallow_any_expr = False

# Query analyzer uses database connections with Any types
[mypy-src.query_analyzer]
disallow_any_expr = False
disallow_any_decorated = False

# Files using database connections extensively (psycopg2 returns Any)
[mypy-src.auto_indexer]
disallow_any_expr = False
disallow_any_decorated = False

[mypy-src.simulator]
disallow_any_expr = False

[mypy-src.schema_evolution]
disallow_any_expr = False

[mypy-src.query_interceptor]
disallow_any_expr = False

[mypy-src.resilience]
disallow_any_expr = False
disallow_any_decorated = False

[mypy-src.monitoring]
disallow_any_expr = False

[mypy-src.lock_manager]
disallow_any_expr = False
disallow_any_decorated = False

[mypy-src.index_scheduler]
disallow_any_expr = False

[mypy-src.stats]
disallow_any_expr = False

[mypy-src.index_cleanup]
disallow_any_expr = False

[mypy-src.pattern_detection]
disallow_any_expr = False

[mypy-src.rollback]
disallow_any_expr = False

[mypy-src.bypass_status]
disallow_any_expr = False

[mypy-src.simulation_verification]
disallow_any_expr = False

[mypy-src.production_cache]
disallow_any_expr = False

[mypy-src.expression]
disallow_any_expr = False

[mypy-src.cpu_throttle]
disallow_any_expr = False

[mypy-src.query_patterns]
disallow_any_expr = False

[mypy-src.write_performance]
disallow_any_expr = False

[mypy-src.audit]
disallow_any_expr = False

[mypy-src.health_check]
disallow_any_expr = False

[mypy-src.query_executor]
disallow_any_expr = False

[mypy-src.schema]
disallow_any_expr = False

[mypy-src.genome]
disallow_any_expr = False

[mypy-src.query_timeout]
disallow_any_expr = False
disallow_any_decorated = False

# Error handler uses decorators with *args, **kwargs that can't be fully typed
[mypy-src.error_handler]
disallow_any_expr = False
disallow_any_decorated = False

# Maintenance uses database operations that return Any
[mypy-src.maintenance]
disallow_any_expr = False
disallow_any_decorated = False

# Safeguard monitoring uses Any for flexible metrics dictionaries
[mypy-src.safeguard_monitoring]
disallow_any_expr = False
disallow_any_explicit = False

# Query pattern learning uses Any for pattern cache dictionaries
[mypy-src.query_pattern_learning]
disallow_any_expr = False
disallow_any_explicit = False

# Structured logging uses Any for flexible log data structures
[mypy-src.structured_logging]
disallow_any_expr = False
disallow_any_explicit = False

# Index retry uses database operations that return Any
[mypy-src.index_retry]
disallow_any_expr = False
disallow_any_explicit = False

# Index lifecycle advanced uses database operations and complex data structures
[mypy-src.index_lifecycle_advanced]
disallow_any_expr = False
disallow_any_explicit = False

# ML query interception uses Any for ML model data structures
[mypy-src.ml_query_interception]
disallow_any_expr = False
disallow_any_explicit = False

# Composite index detection uses database operations that return Any
[mypy-src.composite_index_detection]
disallow_any_expr = False
disallow_any_explicit = False

# Index type selection uses database operations that return Any
[mypy-src.index_type_selection]
disallow_any_expr = False
disallow_any_explicit = False

# Algorithms use database operations and complex data structures
[mypy-src.algorithms]
disallow_any_expr = False
disallow_any_explicit = False

# Algorithm submodules use ML libraries and database operations with Any types
[mypy-src.algorithms.pgm_index]
disallow_any_expr = False
disallow_any_explicit = False

[mypy-src.algorithms.alex]
disallow_any_expr = False
disallow_any_explicit = False

[mypy-src.algorithms.xgboost_classifier]
disallow_any_expr = False
disallow_any_explicit = False
ignore_missing_imports = True

# Workload analysis uses database operations that return Any
[mypy-src.workload_analysis]
disallow_any_expr = False
disallow_any_explicit = False

# Adaptive safeguards uses Any for flexible safeguard data structures
[mypy-src.adaptive_safeguards]
disallow_any_expr = False
disallow_any_explicit = False

# Materialized view support uses database operations that return Any
[mypy-src.materialized_view_support]
disallow_any_expr = False
disallow_any_explicit = False

# Index health uses database operations that return Any
[mypy-src.index_health]
disallow_any_expr = False
disallow_any_explicit = False


# Storage budget uses database operations that return Any
[mypy-src.storage_budget]
disallow_any_expr = False
disallow_any_explicit = False

# Statistics refresh uses database operations that return Any
[mypy-src.statistics_refresh]
disallow_any_expr = False
disallow_any_explicit = False

# Before/after validation uses query analyzer which uses database operations
[mypy-src.before_after_validation]
disallow_any_expr = False
disallow_any_explicit = False

# Maintenance window uses Any for flexible configuration
[mypy-src.maintenance_window]
disallow_any_expr = False
disallow_any_explicit = False

# Approval workflow uses database operations that return Any
[mypy-src.approval_workflow]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

# Redundant index detection uses database operations that return Any
[mypy-src.redundant_index_detection]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

# Per tenant config uses database operations that return Any
[mypy-src.per_tenant_config]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

# Foreign key suggestions uses database operations that return Any
[mypy-src.foreign_key_suggestions]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True


# Concurrent index monitoring uses database operations that return Any
[mypy-src.concurrent_index_monitoring]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

# Algorithms submodules use database operations and complex data structures
[mypy-src.algorithms.predictive_indexing]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

[mypy-src.algorithms.cortex]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True

[mypy-src.algorithms.cert]
disallow_any_expr = False
disallow_any_explicit = False
ignore_errors = True
